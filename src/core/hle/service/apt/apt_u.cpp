// Copyright 2014 Citra Emulator Project
// Licensed under GPLv2 or any later version
// Refer to the license.txt file included.

#include "common/archives.h"
#include "core/hle/service/apt/apt_u.h"

namespace Service::APT {

APT_U::APT_U(std::shared_ptr<Module> apt)
    : Module::APTInterface(std::move(apt), "APT:U", MaxAPTSessions) {
    static const FunctionInfo functions[] = {
        // clang-format off
        {IPC::MakeHeader(0x0001, 1, 0), &APT_U::GetLockHandle, "GetLockHandle"},
        {IPC::MakeHeader(0x0002, 2, 0), &APT_U::Initialize, "Initialize"},
        {IPC::MakeHeader(0x0003, 1, 0), &APT_U::Enable, "Enable"},
        {IPC::MakeHeader(0x0004, 1, 0), nullptr, "Finalize"},
        {IPC::MakeHeader(0x0005, 1, 0), &APT_U::GetAppletManInfo, "GetAppletManInfo"},
        {IPC::MakeHeader(0x0006, 1, 0), &APT_U::GetAppletInfo, "GetAppletInfo"},
        {IPC::MakeHeader(0x0007, 0, 0), nullptr, "GetLastSignaledAppletId"},
        {IPC::MakeHeader(0x0008, 0, 0), nullptr, "CountRegisteredApplet"},
        {IPC::MakeHeader(0x0009, 1, 0), &APT_U::IsRegistered, "IsRegistered"},
        {IPC::MakeHeader(0x000A, 1, 0), nullptr, "GetAttribute"},
        {IPC::MakeHeader(0x000B, 1, 0), &APT_U::InquireNotification, "InquireNotification"},
        {IPC::MakeHeader(0x000C, 4, 4), &APT_U::SendParameter, "SendParameter"},
        {IPC::MakeHeader(0x000D, 2, 0), &APT_U::ReceiveParameter, "ReceiveParameter"},
        {IPC::MakeHeader(0x000E, 2, 0), &APT_U::GlanceParameter, "GlanceParameter"},
        {IPC::MakeHeader(0x000F, 4, 0), &APT_U::CancelParameter, "CancelParameter"},
        {IPC::MakeHeader(0x0010, 3, 2), nullptr, "DebugFunc"},
        {IPC::MakeHeader(0x0011, 3, 0), nullptr, "MapProgramIdForDebug"},
        {IPC::MakeHeader(0x0012, 1, 0), nullptr, "SetHomeMenuAppletIdForDebug"},
        {IPC::MakeHeader(0x0013, 0, 0), nullptr, "GetPreparationState"},
        {IPC::MakeHeader(0x0014, 1, 0), nullptr, "SetPreparationState"},
        {IPC::MakeHeader(0x0015, 5, 0), &APT_U::PrepareToStartApplication, "PrepareToStartApplication"},
        {IPC::MakeHeader(0x0016, 1, 0), &APT_U::PreloadLibraryApplet, "PreloadLibraryApplet"},
        {IPC::MakeHeader(0x0017, 1, 0), &APT_U::FinishPreloadingLibraryApplet, "FinishPreloadingLibraryApplet"},
        {IPC::MakeHeader(0x0018, 1, 0), &APT_U::PrepareToStartLibraryApplet, "PrepareToStartLibraryApplet"},
        {IPC::MakeHeader(0x0019, 1, 0), &APT_U::PrepareToStartSystemApplet, "PrepareToStartSystemApplet"},
        {IPC::MakeHeader(0x001A, 0, 0), &APT_U::PrepareToStartNewestHomeMenu, "PrepareToStartNewestHomeMenu"},
        {IPC::MakeHeader(0x001B, 3, 4), &APT_U::StartApplication, "StartApplication"},
        {IPC::MakeHeader(0x001C, 0, 0), &APT_U::WakeupApplication, "WakeupApplication"},
        {IPC::MakeHeader(0x001D, 0, 0), nullptr, "CancelApplication"},
        {IPC::MakeHeader(0x001E, 2, 4), &APT_U::StartLibraryApplet, "StartLibraryApplet"},
        {IPC::MakeHeader(0x001F, 2, 4), &APT_U::StartSystemApplet, "StartSystemApplet"},
        {IPC::MakeHeader(0x0020, 1, 4), nullptr, "StartNewestHomeMenu"},
        {IPC::MakeHeader(0x0021, 0, 0), &APT_U::OrderToCloseApplication, "OrderToCloseApplication"},
        {IPC::MakeHeader(0x0022, 1, 0), &APT_U::PrepareToCloseApplication, "PrepareToCloseApplication"},
        {IPC::MakeHeader(0x0023, 1, 0), nullptr, "PrepareToJumpToApplication"},
        {IPC::MakeHeader(0x0024, 1, 4), nullptr, "JumpToApplication"},
        {IPC::MakeHeader(0x0025, 3, 0), &APT_U::PrepareToCloseLibraryApplet, "PrepareToCloseLibraryApplet"},
        {IPC::MakeHeader(0x0026, 0, 0), &APT_U::PrepareToCloseSystemApplet, "PrepareToCloseSystemApplet"},
        {IPC::MakeHeader(0x0027, 1, 4), &APT_U::CloseApplication, "CloseApplication"},
        {IPC::MakeHeader(0x0028, 1, 4), &APT_U::CloseLibraryApplet, "CloseLibraryApplet"},
        {IPC::MakeHeader(0x0029, 1, 4), &APT_U::CloseSystemApplet, "CloseSystemApplet"},
        {IPC::MakeHeader(0x002A, 0, 0), &APT_U::OrderToCloseSystemApplet, "OrderToCloseSystemApplet"},
        {IPC::MakeHeader(0x002B, 0, 0), &APT_U::PrepareToJumpToHomeMenu, "PrepareToJumpToHomeMenu"},
        {IPC::MakeHeader(0x002C, 1, 4), &APT_U::JumpToHomeMenu, "JumpToHomeMenu"},
        {IPC::MakeHeader(0x002D, 0, 0), &APT_U::PrepareToLeaveHomeMenu, "PrepareToLeaveHomeMenu"},
        {IPC::MakeHeader(0x002E, 1, 4), &APT_U::LeaveHomeMenu, "LeaveHomeMenu"},
        {IPC::MakeHeader(0x002F, 1, 0), nullptr, "PrepareToLeaveResidentApplet"},
        {IPC::MakeHeader(0x0030, 1, 4), nullptr, "LeaveResidentApplet"},
        {IPC::MakeHeader(0x0031, 4, 0), &APT_U::PrepareToDoApplicationJump, "PrepareToDoApplicationJump"},
        {IPC::MakeHeader(0x0032, 2, 4), &APT_U::DoApplicationJump, "DoApplicationJump"},
        {IPC::MakeHeader(0x0033, 0, 0), &APT_U::GetProgramIdOnApplicationJump, "GetProgramIdOnApplicationJump"},
        {IPC::MakeHeader(0x0034, 2, 4), nullptr, "SendDeliverArg"},
        {IPC::MakeHeader(0x0035, 2, 0), &APT_U::ReceiveDeliverArg, "ReceiveDeliverArg"},
        {IPC::MakeHeader(0x0036, 1, 0), &APT_U::LoadSysMenuArg, "LoadSysMenuArg"},
        {IPC::MakeHeader(0x0037, 1, 2), &APT_U::StoreSysMenuArg, "StoreSysMenuArg"},
        {IPC::MakeHeader(0x0038, 1, 0), nullptr, "PreloadResidentApplet"},
        {IPC::MakeHeader(0x0039, 1, 0), nullptr, "PrepareToStartResidentApplet"},
        {IPC::MakeHeader(0x003A, 1, 4), nullptr, "StartResidentApplet"},
        {IPC::MakeHeader(0x003B, 1, 0), &APT_U::CancelLibraryApplet, "CancelLibraryApplet"},
        {IPC::MakeHeader(0x003C, 1, 2), nullptr, "SendDspSleep"},
        {IPC::MakeHeader(0x003D, 1, 2), nullptr, "SendDspWakeUp"},
        {IPC::MakeHeader(0x003E, 2, 0), nullptr, "ReplySleepQuery"},
        {IPC::MakeHeader(0x003F, 1, 0), nullptr, "ReplySleepNotificationComplete"},
        {IPC::MakeHeader(0x0040, 1, 2), &APT_U::SendCaptureBufferInfo, "SendCaptureBufferInfo"},
        {IPC::MakeHeader(0x0041, 1, 0), &APT_U::ReceiveCaptureBufferInfo, "ReceiveCaptureBufferInfo"},
        {IPC::MakeHeader(0x0042, 2, 0), nullptr, "SleepSystem"},
        {IPC::MakeHeader(0x0043, 1, 0), &APT_U::NotifyToWait, "NotifyToWait"},
        {IPC::MakeHeader(0x0044, 0, 0), &APT_U::GetSharedFont, "GetSharedFont"},
        {IPC::MakeHeader(0x0045, 1, 0), &APT_U::GetWirelessRebootInfo, "GetWirelessRebootInfo"},
        {IPC::MakeHeader(0x0046, 4, 4), &APT_U::Wrap, "Wrap"},
        {IPC::MakeHeader(0x0047, 4, 4), &APT_U::Unwrap, "Unwrap"},
        {IPC::MakeHeader(0x0048, 4, 0), nullptr, "GetProgramInfo"},
        {IPC::MakeHeader(0x0049, 6, 0), nullptr, "Reboot"},
        {IPC::MakeHeader(0x004A, 1, 0), &APT_U::GetCaptureInfo, "GetCaptureInfo"},
        {IPC::MakeHeader(0x004B, 3, 2), &APT_U::AppletUtility, "AppletUtility"},
        {IPC::MakeHeader(0x004C, 0, 0), nullptr, "SetFatalErrDispMode"},
        {IPC::MakeHeader(0x004D, 2, 0), nullptr, "GetAppletProgramInfo"},
        {IPC::MakeHeader(0x004E, 0, 0), nullptr, "HardwareResetAsync"},
        {IPC::MakeHeader(0x004F, 2, 0), &APT_U::SetAppCpuTimeLimit, "SetAppCpuTimeLimit"},
        {IPC::MakeHeader(0x0050, 1, 0), &APT_U::GetAppCpuTimeLimit, "GetAppCpuTimeLimit"},
        {IPC::MakeHeader(0x0051, 2, 0), &APT_U::GetStartupArgument, "GetStartupArgument"},
        {IPC::MakeHeader(0x0052, 4, 4), nullptr, "Wrap1"},
        {IPC::MakeHeader(0x0053, 4, 4), nullptr, "Unwrap1"},
        {IPC::MakeHeader(0x0055, 1, 0), &APT_U::SetScreenCapPostPermission, "SetScreenCapPostPermission"},
        {IPC::MakeHeader(0x0056, 0, 0), &APT_U::GetScreenCapPostPermission, "GetScreenCapPostPermission"},
        {IPC::MakeHeader(0x0057, 1, 4), nullptr, "WakeupApplication2"},
        {IPC::MakeHeader(0x0058, 0, 2), nullptr, "GetProgramID"},
        {IPC::MakeHeader(0x0101, 0, 0), &APT_U::CheckNew3DSApp, "CheckNew3DSApp"},
        {IPC::MakeHeader(0x0102, 0, 0), &APT_U::CheckNew3DS, "CheckNew3DS"},
        {IPC::MakeHeader(0x0103, 0, 0), &APT_U::Unknown0x0103, "Unknown0x0103"},
        {IPC::MakeHeader(0x0104, 0, 0), nullptr, "IsStandardMemoryLayout"},
        {IPC::MakeHeader(0x0105, 4, 0), &APT_U::IsTitleAllowed, "IsTitleAllowed"},
        // clang-format on
    };
    RegisterHandlers(functions);
}

} // namespace Service::APT

SERIALIZE_EXPORT_IMPL(Service::APT::APT_U)
